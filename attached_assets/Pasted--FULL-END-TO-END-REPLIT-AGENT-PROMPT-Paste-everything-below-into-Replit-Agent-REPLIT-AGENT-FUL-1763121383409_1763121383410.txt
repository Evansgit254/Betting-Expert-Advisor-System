
✅ FULL END-TO-END REPLIT AGENT PROMPT
(Paste everything below into Replit Agent)

REPLIT AGENT: FULL PRODUCTION UPGRADE + UI IMPLEMENTATION FOR BETTING EXPERT ADVISOR
AGENT RULES (MUST FOLLOW STRICTLY)
Never ask me questions.
 Infer everything automatically. If a decision is ambiguous, choose the option that is most production-ready.


Work autonomously.
 Perform all steps independently until the entire system is production-grade.


Refactor safely.
 Never break existing system behavior or tests.
 Never remove business logic unless explicitly obsolete.


Follow the phases in order and complete all of them.


Run formatters (black, isort), linter (flake8), type checker (mypy), and tests (pytest) after every logical group of changes.
 Fix and re-run until clean.


All new files must be fully documented and typed.


All production components must use:


Circuit breakers


Global exception handlers


Correlation IDs


Centralized config


Strong logging via src.logging_config.get_logger


All new docs must follow a consistent structure and include “Last Updated” dates.


UI must not break backend; it must consume backend APIs cleanly.


All code must be committed in logically separated commits.



PROJECT OVERVIEW
This project is a production-grade sports betting intelligence engine with:
ML models


Value betting strategies


API adapters (Betfair, Pinnacle, TheOddsAPI)


A unified data-fetching pipeline


A risk engine with drawdown control & Kelly criterion


A monitoring API


Circuit Breakers & resilience layer


Centralized configuration


Dockerized deployment


The goal of this prompt:
 Transform this into a fully production-ready system with a modern UI.

YOUR OBJECTIVE
Upgrade the entire codebase to a 100% production-ready platform + complete UI.
 Perform all tasks below end-to-end, automatically.

PHASE 0 — PREP WORK
Scan the repo and memory.


Build an internal map of:


All modules


All responsibilities


All potential conflicts


All current architecture


Generate a plan (internally, not for user).


Begin execution immediately.



PHASE 1 — BACKEND HARDENING
Task 1: Logger Standardization
Ensure all modules use from src.logging_config import get_logger


Remove duplicated logger utilities from utils.py


Fix all imports


Ensure no circular import with config


Task 2: Unify Database Session Management
Use one context manager for all DB access (handle_db_errors)


Guarantee consistent:


rollback on exception


commit on success


automatic closing


Prevent DetachedInstance issues


Task 3: Circuit Breakers
Implement pybreaker:
fail_max=5  
timeout_duration=60  

Wrap all external API calls:
adapters/theodds_api.py


adapters/pinnacle_client.py


adapters/betfair_exchange.py


data_fetcher.py (internal calls)


Implement fallback to cache when breaker is open.
Task 4: Global Exception Handler
For FastAPI (monitoring API):
Add correlation IDs


Add full error logging with traceback


Add Pydantic request/response models


Add alerting for critical failures


Task 5: Move All Magic Numbers to config
Move thresholds, delays, API retry settings, risk limits, etc.

PHASE 2 — INFRASTRUCTURE
Task 6: Dockerization
Multi-stage Dockerfile


Non-root user


Container health checks


Lightweight runtime image


Task 7: docker-compose Production Stack
Include:
App container


PostgreSQL


Redis


Monitoring (Prometheus/Grafana Optional)


Network isolation


Volumes


Environment variable templates


Task 8: CI/CD
Add GitHub Actions:
Lint


Test


Docker build


Docker push


Deployment job (staged)



PHASE 3 — FULL DOCUMENTATION OVERHAUL
Create or update:
README.md (production version)


ARCHITECTURE.md


DEPLOYMENT.md


RUNBOOK.md


CONFIG_REFERENCE.md


EXTENDING_ADAPTERS.md


EXTENDING_STRATEGIES.md


EXTENDING_RISK.md


UI.md


replit.md


Ensure:
Diagrams included


Clear folder structure


Production flowchart


API documentation



PHASE 4 — CREATE COMPLETE FRONTEND UI
UI Requirements
Framework:
Next.js 14 (App Router)


Typescript


TailwindCSS


ShadCN Components


React Query


Fully responsive


Features:
1. Dashboard Page
Bankroll


Open bets


Recent results


Charts (PL curve, drawdown curve)


Circuit breaker status


API health indicators


2. Strategy Explorer
Configure strategies


View performance stats


Run backtests (trigger backend endpoint)


3. Odds & Fixtures Browser
Live odds table


Highlight value bets


Sorting & filtering


4. System Logs Viewer
Stream logs from backend


Severity filters


5. Settings Page
Configure thresholds


API keys


Risk limits


6. Authentication (Optional but Recommended)
Password login


Token stored securely


Middleware-protected routes


Backend API Changes
Add endpoints for all UI needs


Add pagination


Add params


Add caching options


Frontend Build Output
Place inside /ui/ folder


Provide separate Dockerfile for frontend


Integrate nginx reverse proxy



PHASE 5 — FINAL PRODUCTION INTEGRATION
Add reverse-proxy Nginx config


Add HTTPS support (templated for production)


Add health checks + liveness endpoints


Provide backup strategy for PostgreSQL


Include rate limiting for UI actions



PHASE 6 — FINAL CLEAN-UP
Run isort, black, flake8, mypy


Ensure zero errors


Run full test suite


Fix or modernize tests where needed


Remove dead code


Remove unused imports


Add missing type hints



PHASE 7 — DELIVERY
After finishing all changes:
Required Output
Full list of changed files


Summary of improvements


All new docs


Deployment instructions


UI demo instructions


One-click start commands:


docker-compose up -d

Post-upgrade final report


Any necessary TODOs



BEGIN NOW
Perform all tasks autonomously and end-to-end.
 Do not ask for clarification.
 Execute the complete production upgrade + UI implementation.

END PROMPT



