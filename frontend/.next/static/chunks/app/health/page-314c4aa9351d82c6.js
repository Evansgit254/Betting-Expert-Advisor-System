(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[613],{3351:function(e,s,t){Promise.resolve().then(t.bind(t,6446))},6446:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return d}});var a=t(7437),r=t(2265);let l="http://localhost:5000";function d(){let[e,s]=(0,r.useState)(null),[t,d]=(0,r.useState)(null),[n,c]=(0,r.useState)(!0),[i,m]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(o(),i){let e=setInterval(o,1e4);return()=>clearInterval(e)}},[i]);let o=async()=>{c(!0);try{let[e,t]=await Promise.all([fetch("".concat(l,"/system/status")),fetch("".concat(l,"/health"))]),a=await e.json(),r=await t.json();s(a),d(r)}catch(e){console.error("Failed to fetch system status:",e)}finally{c(!1)}},x=e=>{switch(e.toLowerCase()){case"ok":case"operational":case"connected":case"available":case"closed":return"text-green-400";case"half_open":case"warning":return"text-yellow-400";case"open":case"error":case"unavailable":return"text-red-400";default:return"text-neutral-400"}},u=e=>{let s=x(e),t=s.replace("text-","bg-").replace("-400","-900/30");return(0,a.jsx)("span",{className:"rounded px-2 py-1 text-xs font-medium ".concat(s," ").concat(t),children:e.toUpperCase()})};return(0,a.jsxs)("main",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold",children:"System Health"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:i,onChange:e=>m(e.target.checked),className:"rounded"}),"Auto-refresh (10s)"]}),(0,a.jsx)("button",{onClick:o,className:"rounded-md bg-blue-600 px-4 py-2 text-sm hover:bg-blue-700",children:"Refresh Now"})]})]}),n&&!e?(0,a.jsx)("div",{className:"rounded-md border border-neutral-800 p-8 text-center text-neutral-400",children:"Loading system status..."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[(0,a.jsxs)("div",{className:"rounded-md border border-neutral-800 p-4",children:[(0,a.jsx)("div",{className:"text-sm text-neutral-400",children:"API Status"}),(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[t&&u(t.status),(0,a.jsx)("span",{className:"text-lg font-semibold",children:null==t?void 0:t.service})]})]}),(0,a.jsxs)("div",{className:"rounded-md border border-neutral-800 p-4",children:[(0,a.jsx)("div",{className:"text-sm text-neutral-400",children:"System Status"}),(0,a.jsx)("div",{className:"mt-2",children:e&&u(e.status)})]}),(0,a.jsxs)("div",{className:"rounded-md border border-neutral-800 p-4",children:[(0,a.jsx)("div",{className:"text-sm text-neutral-400",children:"Mode"}),(0,a.jsx)("div",{className:"mt-2",children:e&&(0,a.jsx)("span",{className:"rounded px-2 py-1 text-xs font-medium ".concat("LIVE"===e.mode?"bg-red-900/30 text-red-400":"bg-yellow-900/30 text-yellow-400"),children:e.mode})})]})]}),(null==e?void 0:e.circuit_breakers)&&(0,a.jsxs)("div",{className:"rounded-md border border-neutral-800 bg-neutral-900/50 p-4",children:[(0,a.jsx)("h3",{className:"mb-4 text-lg font-semibold",children:"Circuit Breakers"}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:Object.entries(e.circuit_breakers).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"rounded-md border border-neutral-800 p-4",children:[(0,a.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,a.jsx)("div",{className:"font-medium",children:s}),u(t.status)]}),(0,a.jsxs)("div",{className:"space-y-1 text-sm text-neutral-400",children:[(0,a.jsxs)("div",{children:["Failures: ",t.fail_counter," / ",t.fail_max]}),t.timeout_duration&&(0,a.jsxs)("div",{children:["Reset timeout: ",t.timeout_duration,"s"]})]}),"open"===t.status&&(0,a.jsx)("div",{className:"mt-2 text-xs text-red-400",children:"⚠️ Service unavailable"}),"half_open"===t.status&&(0,a.jsx)("div",{className:"mt-2 text-xs text-yellow-400",children:"\uD83D\uDD04 Testing recovery"})]},s)})})]}),(null==e?void 0:e.database)&&(0,a.jsxs)("div",{className:"rounded-md border border-neutral-800 bg-neutral-900/50 p-4",children:[(0,a.jsx)("h3",{className:"mb-4 text-lg font-semibold",children:"Database"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-neutral-400",children:"Status"}),(0,a.jsx)("div",{className:"mt-1",children:u(e.database.status)})]}),e.database.error&&(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"text-sm text-neutral-400",children:"Error"}),(0,a.jsx)("div",{className:"mt-1 text-sm text-red-400",children:e.database.error})]})]})]}),(null==e?void 0:e.cache)&&(0,a.jsxs)("div",{className:"rounded-md border border-neutral-800 bg-neutral-900/50 p-4",children:[(0,a.jsx)("h3",{className:"mb-4 text-lg font-semibold",children:"Cache"}),(0,a.jsx)("div",{className:"flex items-center gap-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-neutral-400",children:"Status"}),(0,a.jsx)("div",{className:"mt-1",children:u(e.cache.status)})]})})]}),(0,a.jsxs)("div",{className:"rounded-md border border-neutral-800 bg-neutral-900/50 p-4",children:[(0,a.jsx)("h3",{className:"mb-2 text-lg font-semibold",children:"Prometheus Metrics"}),(0,a.jsx)("p",{className:"mb-3 text-sm text-neutral-400",children:"View detailed system metrics in Prometheus format"}),(0,a.jsx)("a",{href:"".concat(l,"/metrics"),target:"_blank",rel:"noopener noreferrer",className:"inline-block rounded-md bg-blue-600 px-4 py-2 text-sm hover:bg-blue-700",children:"Open Metrics Endpoint"})]})]})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=3351)}),_N_E=e.O()}]);